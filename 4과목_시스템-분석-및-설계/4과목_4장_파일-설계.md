# 4과목_4장_파일-설계

# 4-4. 파일 설계

1. 파일의 구성

    파일 : 서로 관련있는 레코드의 집합체

    프로그램의 기본 구성 단위

    - 필드 : 파일을 구성하는 최소 단위
    - 레코드 : 하나 이상의 관련 필드가 모여 구성되는 자료
        1. 논리(Logical) : 사용자 프로그램에 의해 처리됨
        2. 물리(Physical)) : 논리 레코드의 집합 (블록)
    - 데이터베이스 : 파일의 집합

◆ 물리 레코드의 형식

1. 비블록화 고정 길이 레코드
2. 블록화 고정 길이 레코드
3. 비블록화 가변 길이 레코드
4. 블록화 가변 길이 레코드
    1. 블록화 인수 (BF, Blocking Factor)

        하나의 블록을 구성하는 논리 레코드의 개수

    2. IRG (Inter Record Gap)

        레코드와 레코드 사이의 간격

    3. IBG (Inter Block Gap)
    블록과 블록 사이의 간격
    4. 가변 길이 레코드의 경우 레코드 길이 정보 필요/ 프로그램의 작성이 어렵다
    5. 블로킹 : 여러개의 논리 레코드를 묶어 하나의 블록으로 구성하는 것(Blocking)/ 입출력 속도가 빨라진다.

1. 파일의 분류
    1. 파일 편성법에 따른 분류

        기록하는 방법에 따라 순차/색인순차/랜덤/리스트로 분류

    2. 매체에 의한 분류
        - 순차 저장장치 (SASD; Sequential)

            순차 처리만 가능, 저렴하고 용량이 큼 (ex : 자기테이프)

        - 직접 저장장치 (DASD; Direct)

            직접 액세스가 가능, 순차/ 랜덤 병행 가능

            액세스가 빠르고 레코드의 수정이 용이 (ex : 자기디스크 ,드럼)

    3. 내용에 의한 분류
        - 작업 파일

            프로그램에서 생성된 결과를 다른 프로그램의 입력으로 사용하기 위해 작성하는 임시파일

            입출력 데이터, 중간 임시, 체크포인트(예비보관파일) 등이 있다.

        - 프로그램 파일

            데이터를 처리하기 위한 프로그램이 들어있는 파일. 제어 프로그램파일, 처리프로그램파일이 있다.

        - 데이터 파일
            1. 원시 파일
            2. 마스터 파일

                자료 관리의 중추적 역할이자 기본. 트랜잭션 파일에 의해 갱신됨.

            3. 요약 파일

                집계용으로 많이 사용됨

            4. 히스토리 파일

                마스터 파일 등을 원상복구 시키기위한 자료를 보존

            5. 트레일러 파일

                마스터 파일을 목적에 따라 여러개의 파일로 나눴을 때 가장 끝부분에 해당하는 파일

1. 순차편성 (Sequential) / ex : 자기테이프
    1. 장점

        기억공간을 효율적으로 사용 가능.

        레코드의 처리 속도가 빠르며 매체변환이 쉬움 

    1. 단점

        수정에 시간이 많이 소요됨 (전체복사식)

        데이터 검색 효율이 낮음

1. 색인 순차 편성 (Indexed Sequential) / ex : 자기디스크
    1. 레코드들을 키 값 순으로 정렬하여 기록하고 키 항목만을 모은 인덱스(색인)를 구성하여 편성
    2. 순차처리와 랜덤처리가 모두 가능함
    3. 인덱스의 포인터를 사용하여 직접 참조할 수 있다

    구성

    1. 기본 데이터 구역

        실제 레코드의 기록. 코드는 키값순으로 순차적으로 저장됨

    2. 인덱스 구역

        기본 데이터 구역에 대한 인덱스가 기록되는 부분

        - 트랙 인덱스 : 데이터 레코드들 중의 최대키 값과 주소가 기록됨. 한 실린더 당 하나
        - 실린더 인덱스 : 각 태랙 인덱스의 최대키 값과 해당 레코드가 기록된 실린더의 정보가 기록됨. 한 파일당 하나.
        - 마스터 인덱스 : 실린더 인덱스의 정보가 많을 경우, 일정한 크기의 블록으로 구성하는데, 이 때 처리할 레코드가 어느 실린더 인덱스에 기록되어있는지를 기록하는 인덱스
    3. 오버플로 구역
        - 실린더 오버플로 : 기본 데이터구역에서 오버플로 된 데이터를 기록한다.
        - 독립 오버플로 : 실린더 오버플로 에 더 이상 오버플로된 데이터를 기록할 수 없을 때 사용할 수 있는 별도의 예비공간.
        - 장점

            목적에 따라 융통성있게 처리가능

            효율적인 검색이 가능하고 수정이 용이함

        - 단점

            인덱스와 오버플로 구역을 구성하기 위한 추가 기억 공간이 필요하다.

            수정이 잦으면 효율성이 떨어진다.

            액세스 시간이 랜덤편성파일보다 느림

2. 랜덤편성 (Random)

    논리적 순서와 관계없이 특정한 방법으로 키를 생성하여 임의의 위치에 보관하고, 처리시에도 필요한 장소에 직접 접근할 수 있도록 편성하는 방식

    - 처리하고자 하는 레코드를 주소 계산에 의하여 직접 처리할 수 있다.
    - 대화식 처리에 가장 효율적인 방식이다.
    - 직접주소(1:1)법, 디렉토리 조사법, 해싱함수 이용법
    - 장점

        직접 접근 기억장치의 물리적 주소를 통하여 파일의 각 레코드에 직접 접근하거나 기록.

        접근 및 순서에 제약이 없다.

        검색 및 접근이 빠르고(평균 접근 시간 내 검색 가능) 수정이 용이하다.

    - 단점

        주소 변환 과정이 필요하여 시간이 소요됨

        기억공간의 효율이 저하될 수 있음

        물리적 구조에 대한 지식 필요, 프로그래밍 작업이 복잡함

◆ 해싱 함수 이용법

해싱은 해싱함수를 이용하여 계산된 키 값(주소)에 해당하는 기억 공간에 레코드를 보관하거나 보관된 레코드를 검색하는 방법이다.

- 해싱 함수 : 레코드의 키 값에서 저장되어있는 기억장치의 주소를 계산 해 내는 '사상 함수'
- 버킷(Bucket) : 하나의 주소를 가지는 영억, 레코드를 포함함
- 충돌(Collision) : 레코드들이 같은 기억공간(버킷)을 점유하려하는 현상
- 동거자(Synonym) : 충돌되는 레코드들의 집합
- 오버플로(Overflow) : 버킷이 있는 곳에 또 다른 레코드가 저장되도록 해싱이 되는 경우

◆ 해싱함수 선택 시 고려사항

- 오버플로 및 충돌의 최소화
- 키 변환 속도
- 버킷의 크기
- 계산 과정의 최소화 (단순성)

1. 리스트 편성 (List)

    일정한 규칙이나 제약없이 자유롭게 기록하고 다음 레코드의 주소를 가지고 있는 포인터를 통해 논리적인 순서로 연결하는 방식

    레코드가 데이터와 포인터로 구성되며 다음 레코드의 주소가 저장됨

    - 장점

        레코드를 쉽게 삽입·삭제 가능하다

        물리적으로 연속적인 공간을 확보하기

        어려운 경우나 레코드 수가 불규칙하게[ 변하는 경우 효율적이다

    - 단점

        파일 구조가 복잡하여 처리 효율이 떨어짐

        포인터로 인하여 레코드가 커지고, 예비 영역이 필요하므로 기억장소가 낭비된다. 레코드의 검색 시간이 많이 걸린다.

# 4-4. 파일 설계

1. 파일 설계 순서
    1. 파일의 성격 검토
        - 파일의 명칭을 결정한다.
        - 파일의 작성 목적과 종류를 결정한다.
        - 파일이 사용되는 적용 업무를 확인한다.
    2. 파일 항목의 검토
        - 항목의 명칭과 저장 형식을 결정한다.
        - 항목의 배열 순서와 자릿수를 결정한다.
        - 문자의 구분, 레코드의 형식과 크기, 블록의 크기 등을 결정한다.
    3. 파일의 특성 조사
        - 효율적인 파일의 처리 형태, 처리 주기 및 처리 방식을 결정한다.
        - 추가, 수정, 삭제의 발생 빈도와 처리 형태를 확인한다.
        - 파일의 활동률을 확인한다.
        - 순차 처리를 할 것인지 랜덤처리를 할 것인지 처리 유형을 결정한다.
    4. 파일 매체의 검토
    - 기능 검토 사항

        액세스 형태와 처리 방식

        처리 시간과 정보의 양

        작동의 용이성

    - 종합 검토 사항

        저장 매체와 매체의 개수 결정

        장치의 대수 결정

    e. 편성법 검토

    순차 편성, 랜덤 편성, 색인 순차 편성, 리스트 편성 등 파일의 편성 방식을 결정한다.

◆ 파일 설계 시 고려 사항

- 보조기억장치의 접근 횟수
- 파일에 접근해서 수행할 연산의 유형 : 생성, 갱신, 검색, 관리 유지
- 파일 활동률(File Activity Ratio) = 처리 대상 레코드 수/ 전체 레코드 수
- 트랜잭션이나 검색 요청에 대한 응답 시간(Response Time)